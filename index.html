<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>ðŸŽ¤ KI SÃ¤nger (ElevenLabs)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#0f0f0f;
  color:#fff;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.app {
  background:#1c1c1c;
  padding:20px;
  border-radius:14px;
  width:100%;
  max-width:420px;
}
h2 { text-align:center; }
textarea, select, button {
  width:100%;
  margin-top:10px;
  padding:12px;
  border-radius:10px;
  border:none;
  font-size:15px;
}
button {
  background:#00ccff;
  font-weight:bold;
  cursor:pointer;
}
audio {
  width:100%;
  margin-top:15px;
}
a {
  display:block;
  margin-top:10px;
  text-align:center;
  color:#00ffaa;
  text-decoration:none;
}
small {
  display:block;
  margin-top:8px;
  opacity:0.6;
  text-align:center;
}
</style>
</head>

<body>
<div class="app">
  <h2>ðŸŽ¤ KI-SÃ¤nger</h2>

  <textarea id="text" placeholder="Songtext eingeben (Zeilen, Dehnungen, Emotionen!)"></textarea>

  <select id="voice">
    <!-- BELIEBTE ELEVENLABS STIMMEN -->
    <option value="EXAVITQu4vr4xnSDxMaL">Adam (mÃ¤nnlich)</option>
    <option value="21m00Tcm4TlvDq8ikWAM">Rachel (weiblich)</option>
    <option value="AZnzlk1XvdvUeBnXmlld">Domi (weiblich, stark)</option>
    <option value="ErXwobaYiN019PkySvjV">Antoni (mÃ¤nnlich, weich)</option>
    <option value="MF3mGyEYCl7XYWbV9V6O">Elli (jung, weich)</option>
    <option value="TxGEqnHWrfWFTfGW9XjX">Josh (klar, mÃ¤nnlich)</option>
  </select>

  <button onclick="generate()">ðŸŽ¶ MP3 erzeugen</button>

  <audio id="audio" controls></audio>
  <a id="download" download="ki_song.mp3">â¬‡ MP3 herunterladen</a>

  <small>HTTPS âœ” Â· GitHub Pages âœ” Â· kein Server</small>
</div>

<script>
const API_KEY = "sk_d336569cc3360c289ac6c535cb05053a7bb8443f39c9a7e6";

async function generate() {
  const text = document.getElementById("text").value.trim();
  if (!text) {
    alert("Bitte Songtext eingeben ðŸ™‚");
    return;
  }

  const voice = document.getElementById("voice").value;

  try {
    const res = await fetch(
      `https://api.elevenlabs.io/v1/text-to-speech/${voice}`,
      {
        method: "POST",
        headers: {
          "xi-api-key": API_KEY,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          text: text,
          model_id: "eleven_multilingual_v2",
          voice_settings: {
            stability: 0.15,
            similarity_boost: 0.9
          }
        })
      }
    );

    if (!res.ok) throw new Error("API Fehler");

    const blob = await res.blob();
    const url = URL.createObjectURL(blob);

    const audio = document.getElementById("audio");
    const dl = document.getElementById("download");

    audio.src = url;
    dl.href = url;
    audio.play();

  } catch (e) {
    alert("Fehler bei der Verbindung ðŸ˜•");
    console.error(e);
  }
}
</script>
</body>
</html>
